[gd_resource type="VisualShader" load_steps=10 format=3 uid="uid://bu882f1888bij"]

[sub_resource type="VisualShaderNodeInput" id="VisualShaderNodeInput_3kimo"]
input_name = "color"

[sub_resource type="VisualShaderNodeColorFunc" id="VisualShaderNodeColorFunc_vxbup"]
function = 2

[sub_resource type="VisualShaderNodeVectorDecompose" id="VisualShaderNodeVectorDecompose_3kimo"]

[sub_resource type="VisualShaderNodeFloatOp" id="VisualShaderNodeFloatOp_kbjg1"]
default_input_values = [0, 0.0, 1, 0.1]
operator = 2

[sub_resource type="VisualShaderNodeExpression" id="VisualShaderNodeExpression_3kimo"]
size = Vector2(1320, 1260)
expression = "
float light_dot = dot(normalize(light_dir), normal);
albedo_result = vec3(color.x, color.y, color.z) + vec3(light_dot * 1.5) + vec3(normal.x * light_dot);
"

[sub_resource type="VisualShaderNodeVec3Parameter" id="VisualShaderNodeVec3Parameter_kbjg1"]
parameter_name = "light_dir"
default_value_enabled = true
default_value = Vector3(5, 2, 2)

[sub_resource type="VisualShaderNodeVec3Parameter" id="VisualShaderNodeVec3Parameter_ptroj"]
parameter_name = "shadow_dir"
default_value_enabled = true
default_value = Vector3(0, -2, -2)

[sub_resource type="VisualShaderNodeInput" id="VisualShaderNodeInput_ji083"]
input_name = "normal"

[sub_resource type="VisualShaderNodeVec3Constant" id="VisualShaderNodeVec3Constant_vxbup"]
constant = Vector3(0, 1, 1)

[resource]
code = "shader_type spatial;
render_mode blend_mix, depth_draw_opaque, depth_test_default, cull_back, diffuse_lambert, specular_disabled, unshaded, ambient_light_disabled;

uniform vec3 light_dir = vec3(5.000000, 2.000000, 2.000000);



void vertex() {
// Vector3Constant:3
	vec3 n_out3p0 = vec3(0.000000, 1.000000, 1.000000);


// Output:0
	COLOR.rgb = n_out3p0;


}

void fragment() {
// Vector3Parameter:7
	vec3 n_out7p0 = light_dir;


// Input:13
	vec4 n_out13p0 = COLOR;


// Input:9
	vec3 n_out9p0 = NORMAL;


	vec3 n_out6p0;
// Expression:6
	n_out6p0 = vec3(0.0, 0.0, 0.0);
	{
		
		float light_dot = dot(normalize(n_out7p0), n_out9p0);
		n_out6p0 = vec3(n_out13p0.x, n_out13p0.y, n_out13p0.z) + vec3(light_dot * 1.5) + vec3(n_out9p0.x * light_dot);
		
	}


	vec3 n_out14p0;
// ColorFunc:14
	{
		vec3 c = n_out6p0;
		vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
		vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
		vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));
		float d = q.x - min(q.w, q.y);
		float e = 1.0e-10;
		n_out14p0 = vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);
	}


// VectorDecompose:16
	float n_out16p0 = n_out14p0.x;
	float n_out16p1 = n_out14p0.y;
	float n_out16p2 = n_out14p0.z;


// FloatOp:17
	float n_in17p1 = 0.10000;
	float n_out17p0 = n_out16p2 * n_in17p1;


// Output:0
	ALBEDO = n_out6p0;
	ALPHA = n_out17p0;


}
"
modes/specular = 2
flags/unshaded = true
flags/ambient_light_disabled = true
nodes/vertex/3/node = SubResource("VisualShaderNodeVec3Constant_vxbup")
nodes/vertex/3/position = Vector2(-300, 300)
nodes/vertex/connections = PackedInt32Array(3, 0, 0, 6)
nodes/fragment/0/position = Vector2(1080, -100)
nodes/fragment/6/node = SubResource("VisualShaderNodeExpression_3kimo")
nodes/fragment/6/position = Vector2(-1480, -120)
nodes/fragment/6/size = Vector2(1320, 1260)
nodes/fragment/6/input_ports = "0,4,light_dir;1,5,color;2,4,normal;"
nodes/fragment/6/output_ports = "0,4,albedo_result;"
nodes/fragment/6/expression = "
float light_dot = dot(normalize(light_dir), normal);
albedo_result = vec3(color.x, color.y, color.z) + vec3(light_dot * 1.5) + vec3(normal.x * light_dot);
"
nodes/fragment/7/node = SubResource("VisualShaderNodeVec3Parameter_kbjg1")
nodes/fragment/7/position = Vector2(-2400, -840)
nodes/fragment/8/node = SubResource("VisualShaderNodeVec3Parameter_ptroj")
nodes/fragment/8/position = Vector2(-2420, -380)
nodes/fragment/9/node = SubResource("VisualShaderNodeInput_ji083")
nodes/fragment/9/position = Vector2(-2240, 400)
nodes/fragment/13/node = SubResource("VisualShaderNodeInput_3kimo")
nodes/fragment/13/position = Vector2(-2220, 140)
nodes/fragment/14/node = SubResource("VisualShaderNodeColorFunc_vxbup")
nodes/fragment/14/position = Vector2(-60, 140)
nodes/fragment/16/node = SubResource("VisualShaderNodeVectorDecompose_3kimo")
nodes/fragment/16/position = Vector2(440, 160)
nodes/fragment/17/node = SubResource("VisualShaderNodeFloatOp_kbjg1")
nodes/fragment/17/position = Vector2(564.1683, 883.4575)
nodes/fragment/connections = PackedInt32Array(7, 0, 6, 0, 6, 0, 0, 0, 13, 0, 6, 1, 9, 0, 6, 2, 6, 0, 14, 0, 14, 0, 16, 0, 16, 2, 17, 0, 17, 0, 0, 1)
nodes/light/0/position = Vector2(1020, 160)
