[gd_scene load_steps=27 format=3 uid="uid://bsvcsug2emh60"]

[ext_resource type="Sky" uid="uid://ble1xcqnre6ho" path="res://Assets/Skybox/NightSky.tres" id="1_qsjrb"]
[ext_resource type="PackedScene" uid="uid://dlk3re05kefyw" path="res://Assets/Particles/Snowfall.tscn" id="3_ytmxh"]
[ext_resource type="PackedScene" uid="uid://bw0i4ae03id06" path="res://Nodes/Debug/Logging/DebugLog.tscn" id="4_0f5h7"]
[ext_resource type="PackedScene" uid="uid://dsk41q2rvkrai" path="res://Nodes/Player/PlayerCharacter.tscn" id="4_iufkg"]
[ext_resource type="PackedScene" uid="uid://f7a4itxgeb4k" path="res://Assets/Models/Environments/mansion.tscn" id="5_0f5h7"]
[ext_resource type="PackedScene" uid="uid://bhjeu6bj48qky" path="res://Assets/Models/Entities/SingleDoor/SingleDoor.tscn" id="7_c264a"]
[ext_resource type="PackedScene" uid="uid://41cmrwq60ve6" path="res://Assets/Models/Entities/DoubleDoor/DoubleDoor.tscn" id="7_ytmxh"]
[ext_resource type="PackedScene" uid="uid://ccglv7aoo0nlw" path="res://Assets/Models/Entities/ItemBox/ItemBox.tscn" id="8_6xh1p"]
[ext_resource type="PackedScene" uid="uid://c1sxxkcovj6rq" path="res://Nodes/Entities/Volumes/WaterVolume/WaterVolume.tscn" id="10_201fe"]
[ext_resource type="Texture2D" uid="uid://iq2n6gvgwbt3" path="res://Assets/2D/Inventory/Head/3DGlasses.png" id="10_ytmxh"]
[ext_resource type="PackedScene" uid="uid://t622wlat3n41" path="res://Nodes/Entities/Volumes/IceVolume/IceVolume.tscn" id="11_xjl2p"]
[ext_resource type="ArrayMesh" uid="uid://d30b1iy0xfy45" path="res://Assets/Models/Environments/OutdoorWater/OutdoorWaterVolumeSurface.res" id="12_p30di"]
[ext_resource type="Texture2D" uid="uid://bp3mv1q820fcy" path="res://Assets/2D/Inventory/Keys/RubyKey.png" id="13_hctok"]
[ext_resource type="Texture2D" uid="uid://pl11cc0pnw3n" path="res://Assets/2D/Inventory/Keys/SaphKey.png" id="14_lp1f3"]
[ext_resource type="Texture2D" uid="uid://csh17ai24y78t" path="res://Assets/2D/Inventory/Items/Lighter.png" id="14_t2vuu"]
[ext_resource type="PackedScene" uid="uid://bx857hg6b3g3r" path="res://Assets/Models/UI/Journal/Journal.tscn" id="16_p30di"]

[sub_resource type="Environment" id="Environment_c264a"]
background_mode = 2
background_energy_multiplier = 0.03
sky = ExtResource("1_qsjrb")
ambient_light_color = Color(1, 1, 1, 1)
ambient_light_energy = 0.0
tonemap_mode = 2
glow_enabled = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_8c81w"]
transparency = 1
shading_mode = 0
albedo_color = Color(0.17254902, 0.4392157, 0.72156864, 0.39607844)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_p30di"]
points = PackedVector3Array(-21.64153, -0.78536, 1.0749712, -11.6916275, 2.833333, 17.355726, -14.406179, 2.833333, 35.45238, -23.452381, 2.833333, 6.503188, -23.452381, -0.78536, 35.45238, -11.6916275, -0.78536, -4.3571434, -14.406179, -0.78536, 35.45238, -11.6916275, 2.833333, -4.3571434, -23.452381, 2.833333, 35.45238, -17.12073, 2.833333, -3.449194, -11.6916275, -0.78536, 17.355726, -23.452381, -0.78536, 6.503188, -15.311029, -0.78536, -4.3571434, -21.64153, 2.833333, 1.0749712, -17.12073, -0.78536, -3.449194, -15.311029, 2.833333, -4.3571434)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_8c81w"]
points = PackedVector3Array(4.594529, 2.833333, 6.5, 5.499645, -0.78536, -8.880953, 5.499645, 2.833333, -8.880953, -11.690476, 2.833333, -5.261551, -11.690476, -0.78536, 3.7854486, 6.4047613, -0.78536, 6.5, -11.690476, -0.78536, -5.261551, -11.690476, 2.833333, 3.7854486, 6.4047613, 2.833333, 6.5, 6.4047613, -0.78536, -8.880953, 6.4047613, 2.833333, -8.880953, 4.594529, -0.78536, 6.5)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_fi7j4"]
points = PackedVector3Array(13.642858, -4.4052935, -5.2619057, 8.214286, -13.452381, -22.452381, 13.642858, -13.452381, -22.452381, 8.214286, -1.6904764, -22.452381, 8.214286, -13.452381, -7.072492, 13.642858, -1.6904764, -22.452381, 8.214286, -1.6904764, -5.2619057, 13.642858, -13.452381, -7.072492, 13.642858, -1.6904764, -5.2619057, 8.214286, -4.4052935, -5.2619057)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_4v62a"]
points = PackedVector3Array(6.4047623, -0.7853601, -8.8798895, 17.261906, 2.8333333, 4.689679, 15.450965, 2.8333333, 6.49876, 8.215703, 2.8333333, -22.452381, 13.641087, -1.6904762, -22.452381, 6.4047623, -0.7853601, 7.4047623, 17.261906, -0.7853601, 4.689679, 6.4047623, 2.8333333, 7.4047623, 13.641087, 2.8333333, -22.452381, 8.215703, -1.6904762, -22.452381, 17.261906, 2.8333333, -6.1677294, 8.215703, -1.6904762, -4.3586483, 17.261906, -0.7853601, -6.1677294, 13.641087, -0.7853601, 7.4047623, 6.4047623, 2.8333333, -8.8798895, 13.641087, 2.8333333, 7.4047623, 15.450965, -0.7853601, 6.49876)

[sub_resource type="BoxShape3D" id="BoxShape3D_xjl2p"]
size = Vector3(17, 10, 54)

[sub_resource type="PlaneMesh" id="PlaneMesh_xjl2p"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_201fe"]
transparency = 1
shading_mode = 0
albedo_color = Color(0.17280002, 0.4372799, 0.72, 0.39607844)

[sub_resource type="BoxShape3D" id="BoxShape3D_ytmxh"]
size = Vector3(4, 3, 0.5)

[node name="Root" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_c264a")

[node name="PlayerCharacter" parent="." instance=ExtResource("4_iufkg")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, -11.1145, 4.0728216, -127.477005)
collision_mask = 263
floor_constant_speed = true
floor_max_angle = 1.3089969
floor_snap_length = 0.2

[node name="OmniLight3D" type="OmniLight3D" parent="PlayerCharacter"]
light_color = Color(1, 0.88666666, 0.83, 1)
light_energy = 3.0
omni_range = 14.0
omni_attenuation = 2.0

[node name="Snowfall" parent="PlayerCharacter" instance=ExtResource("3_ytmxh")]
transform = Transform3D(1, 0, 0, 0, 0.9999965, -0.0026528975, 0, 0.0026528975, 0.9999965, 0, 1, 0)
visibility_aabb = AABB(-30.324068, -1.5484649, -28.909891, 57.440937, 12.82168, 56.40091)

[node name="Journal2" parent="PlayerCharacter" instance=ExtResource("16_p30di")]
transform = Transform3D(-1.8976012e-09, 1.0761828e-08, -0.25, 0.24620193, 0.043412056, 0, 0.043412056, -0.24620193, -1.0927847e-08, 0, -1.5, 0.75)
OpenPosition = Vector3(0, -0.1, 0.75)
ClosePosition = Vector3(0, -1.5, 0.75)

[node name="DebugLog" parent="." instance=ExtResource("4_0f5h7")]

[node name="Mansion" parent="." instance=ExtResource("5_0f5h7")]

[node name="Doors" type="Node" parent="."]

[node name="PBClosetDoor" parent="Doors" instance=ExtResource("7_c264a")]
transform = Transform3D(1.3113416e-07, 0, -1, 0, 1, 0, 1, 0, 1.3113416e-07, -24.75, 6.05, -10.8)
requiredItem = null

[node name="PBBathroomDoor" parent="Doors" instance=ExtResource("7_c264a")]
transform = Transform3D(1.3113416e-07, 0, -1, 0, 1, 0, 1, 0, 1.3113416e-07, -24.75, 6.05, -18.8)
requiredItem = 4

[node name="SideHallDoor" parent="Doors" instance=ExtResource("7_c264a")]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 10.8, 0, 0.55)
requiredItem = null

[node name="OfficeDoor" parent="Doors" instance=ExtResource("7_c264a")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 17.2, 6.05, -5.5)
requiredItem = null

[node name="2FBathroomDoor" parent="Doors" instance=ExtResource("7_c264a")]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, 12.65, 6.05, -11)
requiredItem = 3

[node name="SBDoor" parent="Doors" instance=ExtResource("7_c264a")]
transform = Transform3D(-4.371139e-08, 0, -1, 0, 1, 0, 1, 0, -4.371139e-08, -10.65, 6.05, -11)
requiredItem = 3

[node name="LibraryDoor" parent="Doors" instance=ExtResource("7_c264a")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 17.2, 0, -19.6)
requiredItem = 2

[node name="FrontCloset" parent="Doors" instance=ExtResource("7_c264a")]
transform = Transform3D(-4.371139e-08, 0, 1, 0, 1, 0, -1, 0, -4.371139e-08, 14.6, 0, 5)
requiredItem = 2

[node name="DoubleDoor" parent="Doors" instance=ExtResource("7_ytmxh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.5, 0, 0)
requiredItem = 4

[node name="OfficeBalconyDoor2" parent="Doors" instance=ExtResource("7_ytmxh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 17, 6.05, 5.2)
requiredItem = null

[node name="TestItemBox" parent="." instance=ExtResource("8_6xh1p")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 19, 0, -36)
Item = 2
Icon = ExtResource("10_ytmxh")

[node name="OutdoorWaterVolume" parent="." node_paths=PackedStringArray("Volume") instance=ExtResource("10_201fe")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -141)
Volume = NodePath("CollisionShape3D")
PushDirection = Vector3(0, 0, 2)
IsDebug = null

[node name="MeshInstance3D" type="MeshInstance3D" parent="OutdoorWaterVolume"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, -2.3, 2)
mesh = ExtResource("12_p30di")
surface_material_override/0 = SubResource("StandardMaterial3D_8c81w")

[node name="CollisionShape3D" type="CollisionShape3D" parent="OutdoorWaterVolume"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, -3.1, 2)
shape = SubResource("ConvexPolygonShape3D_p30di")

[node name="OutdoorWaterVolume2" parent="." node_paths=PackedStringArray("Volume") instance=ExtResource("10_201fe")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -141)
Volume = NodePath("CollisionShape3D2")
PushDirection = Vector3(-2, 0, 0)
IsDebug = null

[node name="CollisionShape3D2" type="CollisionShape3D" parent="OutdoorWaterVolume2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, -3.1, 2)
shape = SubResource("ConvexPolygonShape3D_8c81w")

[node name="OutdoorWaterVolume3" parent="." node_paths=PackedStringArray("Volume") instance=ExtResource("10_201fe")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -141)
Volume = NodePath("CollisionShape3D3")
PushDirection = null
IsDebug = null

[node name="CollisionShape3D3" type="CollisionShape3D" parent="OutdoorWaterVolume3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, -3.1, 2)
shape = SubResource("ConvexPolygonShape3D_fi7j4")

[node name="OutdoorWaterVolume4" parent="." node_paths=PackedStringArray("Volume") instance=ExtResource("10_201fe")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -141)
Volume = NodePath("CollisionShape3D4")
PushDirection = null
IsDebug = null

[node name="CollisionShape3D4" type="CollisionShape3D" parent="OutdoorWaterVolume4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, -3.1, 2)
shape = SubResource("ConvexPolygonShape3D_4v62a")

[node name="PoolVolume" parent="." node_paths=PackedStringArray("Volume") instance=ExtResource("10_201fe")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20, 0, -71)
Volume = NodePath("WaterShape")
PushDirection = null
IsDebug = null

[node name="WaterShape" type="CollisionShape3D" parent="PoolVolume"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5, -5.3, -5.550003)
shape = SubResource("BoxShape3D_xjl2p")
debug_color = Color(0, 0.6, 0.7019608, 0.41960785)

[node name="WaterSurface" type="MeshInstance3D" parent="PoolVolume"]
transform = Transform3D(12, 0, 0, 0, 14, 0, 0, 0, 29, 0, -0.3, -4)
mesh = SubResource("PlaneMesh_xjl2p")
surface_material_override/0 = SubResource("StandardMaterial3D_201fe")

[node name="ForwardGardenIce" parent="." node_paths=PackedStringArray("Destination") instance=ExtResource("11_xjl2p")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 27, 0, -32)
Destination = NodePath("Destination")

[node name="CollisionShape3D" type="CollisionShape3D" parent="ForwardGardenIce"]
shape = SubResource("BoxShape3D_ytmxh")

[node name="Destination" type="Node3D" parent="ForwardGardenIce"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -9)

[node name="BackGardenIce" parent="." node_paths=PackedStringArray("Destination") instance=ExtResource("11_xjl2p")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 27, 0, -39)
Destination = NodePath("Destination")

[node name="CollisionShape3D" type="CollisionShape3D" parent="BackGardenIce"]
shape = SubResource("BoxShape3D_ytmxh")

[node name="Destination" type="Node3D" parent="BackGardenIce"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 8)

[node name="ParticleColliders" type="Node3D" parent="."]

[node name="GPUParticlesCollisionBox3D" type="GPUParticlesCollisionBox3D" parent="ParticleColliders"]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, -0.75878924, 3, 3.1577148)
size = Vector3(40.56836, 6, 13.68457)

[node name="GPUParticlesCollisionBox3D2" type="GPUParticlesCollisionBox3D" parent="ParticleColliders"]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, -7.802002, 6, -36.5)
size = Vector3(52.395996, 12, 69)

[node name="GPUParticlesCollisionBox3D3" type="GPUParticlesCollisionBox3D" parent="ParticleColliders"]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 26.500002, 6, -56.5)
size = Vector3(21, 12, 29)

[node name="GPUParticlesCollisionBox3D6" type="GPUParticlesCollisionBox3D" parent="ParticleColliders"]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, -20, 6, -87.75)
size = Vector3(28, 12, 33.5)

[node name="GPUParticlesCollisionBox3D4" type="GPUParticlesCollisionBox3D" parent="ParticleColliders"]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, 27.000002, 6, -8)
size = Vector3(20, 12, 44)

[node name="GPUParticlesCollisionBox3D5" type="GPUParticlesCollisionBox3D" parent="ParticleColliders"]
transform = Transform3D(-1, 0, -8.742278e-08, 0, 1, 0, 8.742278e-08, 0, -1, -24.999998, 6, -8)
size = Vector3(18, 12, 44)

[node name="GPUParticlesCollisionBox3D7" type="GPUParticlesCollisionBox3D" parent="ParticleColliders"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, -50)
size = Vector3(200, 2, 200)

[node name="Node" type="Node" parent="."]

[node name="RubyKey" parent="Node" instance=ExtResource("8_6xh1p")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 31.372026, 0, -15.104148)
Item = 2
Icon = ExtResource("13_hctok")

[node name="SaphKey" parent="Node" instance=ExtResource("8_6xh1p")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 18.49672, 4.7557716, -27.933933)
Item = 3
Icon = ExtResource("14_lp1f3")

[node name="Lighter" parent="Node" instance=ExtResource("8_6xh1p")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 14.5, 0, 8)
Item = 12
Icon = ExtResource("14_t2vuu")
